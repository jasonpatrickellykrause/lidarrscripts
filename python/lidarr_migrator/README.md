# Lidarr Migration Scripts

> **Created by Claude** (Anthropic AI Assistant) on January 1, 2026
>
> These scripts were generated by Claude to help users migrate their Lidarr music libraries between instances.
> Feel free to use, modify, and distribute as needed.

Python scripts for exporting and importing artists and albums between Lidarr instances. Perfect for migrating your music library to a new server or backup/restore operations.

## Features

- **Export all artists and albums** from a Lidarr instance
- **Multiple export formats**: JSON (full data) or CSV (spreadsheet-friendly)
- **MusicBrainz ID export**: Lightweight export for bulk artist import
- **Import from exports**: Migrate artists to a new Lidarr instance
- **Dry-run mode**: Test imports before making changes
- **Rate limiting**: Configurable delays to avoid API throttling
- **Progress tracking**: Real-time feedback during import/export

## Requirements

- Python 3.6 or higher
- `requests` library

Install dependencies:

```bash
pip install requests
```

## Getting Your API Key

1. Open Lidarr web interface
2. Go to **Settings** → **General**
3. Click **Show Advanced**
4. Copy the **API Key**

## Export Script Usage

### Basic Export (JSON)

Export all artists and albums to a JSON file:

```bash
python lidarr_export.py \
  --url http://localhost:8686 \
  --api-key YOUR_API_KEY
```

Output: `lidarr_export_YYYYMMDD_HHMMSS.json`

### Export to CSV

Export as CSV files (separate files for artists and albums):

```bash
python lidarr_export.py \
  --url http://localhost:8686 \
  --api-key YOUR_API_KEY \
  --format csv
```

Output:

- `lidarr_export_YYYYMMDD_HHMMSS_artists.csv`
- `lidarr_export_YYYYMMDD_HHMMSS_albums.csv`

### Export MusicBrainz IDs Only

For a lightweight export containing only MusicBrainz IDs (fastest for bulk import):

```bash
python lidarr_export.py \
  --url http://localhost:8686 \
  --api-key YOUR_API_KEY \
  --mbids-only
```

Output: `lidarr_mbids_YYYYMMDD_HHMMSS.txt`

### Specify Output File

```bash
python lidarr_export.py \
  --url http://localhost:8686 \
  --api-key YOUR_API_KEY \
  -o my_lidarr_backup.json
```

## Import Script Usage

### Dry Run (Test First!)

**Always test with dry-run first** to verify everything looks correct:

```bash
python lidarr_import.py \
  --url http://localhost:8687 \
  --api-key YOUR_NEW_API_KEY \
  --root-folder /music \
  --file lidarr_export.json \
  --dry-run
```

This shows what would be imported without making any changes.

### Import from JSON Export

After verifying with dry-run, perform the actual import:

```bash
python lidarr_import.py \
  --url http://localhost:8687 \
  --api-key YOUR_NEW_API_KEY \
  --root-folder /music \
  --file lidarr_export.json
```

### Import from MusicBrainz ID List

Import artists using a MusicBrainz ID list:

```bash
python lidarr_import.py \
  --url http://localhost:8687 \
  --api-key YOUR_NEW_API_KEY \
  --root-folder /music \
  --mbid-file lidarr_mbids.txt
```

### Import Without Monitoring

Add artists but don't monitor them (useful for selective monitoring):

```bash
python lidarr_import.py \
  --url http://localhost:8687 \
  --api-key YOUR_NEW_API_KEY \
  --root-folder /music \
  --file lidarr_export.json \
  --no-monitor
```

### Adjust Rate Limiting

Increase delay between API calls (default is 0.5 seconds):

```bash
python lidarr_import.py \
  --url http://localhost:8687 \
  --api-key YOUR_NEW_API_KEY \
  --root-folder /music \
  --file lidarr_export.json \
  --delay 1.0
```

## Export File Formats

### JSON Export Structure

```json
{
  "export_date": "2026-01-01T12:00:00",
  "lidarr_url": "http://localhost:8686",
  "total_artists": 150,
  "total_albums": 800,
  "artists": [
    {
      "artistName": "Artist Name",
      "foreignArtistId": "musicbrainz-id-here",
      "mbId": "musicbrainz-id-here",
      "overview": "Artist biography...",
      "artistType": "Person",
      "genres": ["Rock", "Alternative"],
      "status": "continuing",
      "monitored": true,
      "qualityProfileId": 1,
      "metadataProfileId": 1
    }
  ],
  "albums": [
    {
      "title": "Album Title",
      "foreignAlbumId": "musicbrainz-album-id",
      "artistName": "Artist Name",
      "releaseDate": "2020-01-01",
      "albumType": "Album",
      "monitored": true
    }
  ]
}
```

### MusicBrainz ID List Format

Simple text file with one MusicBrainz artist ID per line:

```
5b11f4ce-a62d-471e-81fc-a69a8278c7da
65f4f0c5-ef9e-490c-aee3-909e7ae6b2ab
83d91898-7763-47d7-b03b-b92132375c47
```

## Common Use Cases

### 1. Server Migration

Export from old server:

```bash
python lidarr_export.py \
  --url http://oldserver:8686 \
  --api-key OLD_API_KEY \
  -o migration_backup.json
```

Import to new server:

```bash
# Test first
python lidarr_import.py \
  --url http://newserver:8686 \
  --api-key NEW_API_KEY \
  --root-folder /mnt/music \
  --file migration_backup.json \
  --dry-run

# Then import
python lidarr_import.py \
  --url http://newserver:8686 \
  --api-key NEW_API_KEY \
  --root-folder /mnt/music \
  --file migration_backup.json
```

### 2. Backup

Create regular backups:

```bash
python lidarr_export.py \
  --url http://localhost:8686 \
  --api-key YOUR_API_KEY \
  -o "/backups/lidarr_backup_$(date +%Y%m%d).json"
```

### 3. Partial Migration

Export MusicBrainz IDs, manually edit the list to remove unwanted artists, then import:

```bash
# Export
python lidarr_export.py \
  --url http://localhost:8686 \
  --api-key YOUR_API_KEY \
  --mbids-only \
  -o mbids.txt

# Edit mbids.txt to remove unwanted artists

# Import
python lidarr_import.py \
  --url http://localhost:8687 \
  --api-key NEW_API_KEY \
  --root-folder /music \
  --mbid-file mbids.txt
```

## Important Notes

### What Gets Imported

- ✅ Artist metadata (name, biography, type, genres)
- ✅ MusicBrainz IDs (for accurate matching)
- ✅ Monitoring status
- ✅ Quality/Metadata profile preferences
- ✅ Tags
- ❌ Downloaded music files (must be copied separately)
- ❌ Album files/tracks (Lidarr will re-scan after artist import)
- ❌ Custom import lists

### Root Folder Requirements

The `--root-folder` path must:

- Already exist in the target Lidarr instance's root folder settings
- Be accessible by Lidarr
- Use the exact path as configured in Lidarr Settings → Media Management → Root Folders

### Quality & Metadata Profiles

The import script uses the **first available** quality and metadata profiles from the target Lidarr instance. To use specific profiles:

1. Set them as default in the target Lidarr instance, or
2. Manually edit the export JSON to specify profile IDs

### Rate Limiting

The default delay (0.5 seconds) works for most cases. Increase if you experience:

- API timeout errors
- Rate limiting messages
- High server load

### Large Libraries

For libraries with 500+ artists:

- Expect imports to take considerable time
- Monitor Lidarr's task queue
- Consider importing in batches using edited MBID lists

## Troubleshooting

### "Artist not found in MusicBrainz"

- The artist may have been removed from MusicBrainz
- Check if the MusicBrainz ID is still valid
- Search for the artist manually in Lidarr and add individually

### API Connection Errors

- Verify the URL is correct (include `http://` or `https://`)
- Check that Lidarr is running and accessible
- Verify the API key is correct
- Check firewall/network settings

### Import Skips Artists

- Some artists may already exist in the target instance
- Check Lidarr logs for specific error messages
- Verify the root folder path is correct

### Different Profile IDs

Quality and metadata profiles may have different IDs between instances. The import script uses the first available profile from the target instance. To preserve original profiles, manually map them in the JSON export.

## Output Examples

### Export Output

```
Fetching artists...
Found 150 artists
Fetching albums...
Found 800 albums

Export complete: lidarr_export_20260101_120000.json
  - 150 artists
  - 800 albums
```

### Import Output (Dry Run)

```
[1/150] Processing: Artist Name
  ✓ Would import: Artist Name (mbid-here)
[2/150] Processing: Another Artist
  ✓ Would import: Another Artist (mbid-here)
...
==================================================
IMPORT SUMMARY
==================================================
Total artists: 150
Successfully imported: 150
Failed: 0
Skipped: 0
==================================================
```

## Script Options Reference

### Export Script (`lidarr_export.py`)

| Option | Required | Description |
|--------|----------|-------------|
| `--url` | Yes | Lidarr instance URL |
| `--api-key` | Yes | Lidarr API key |
| `-o, --output` | No | Output file path |
| `--format` | No | Export format: `json` or `csv` (default: json) |
| `--mbids-only` | No | Export only MusicBrainz IDs |

### Import Script (`lidarr_import.py`)

| Option | Required | Description |
|--------|----------|-------------|
| `--url` | Yes | Target Lidarr instance URL |
| `--api-key` | Yes | Target Lidarr API key |
| `--root-folder` | Yes | Root folder path for music |
| `--file` | * | Path to JSON export file |
| `--mbid-file` | * | Path to MusicBrainz ID list |
| `--dry-run` | No | Test import without changes |
| `--delay` | No | Delay between requests (default: 0.5) |
| `--no-monitor` | No | Don't monitor imported artists |

*Either `--file` or `--mbid-file` must be specified

## License

These scripts are provided as-is for personal use. Feel free to modify for your needs.

## Credits

**Created by:** Claude (Anthropic AI Assistant)  
**Date:** January 1, 2026  
**Purpose:** To assist users in migrating Lidarr music libraries between instances

These scripts were generated by Claude, an AI assistant created by Anthropic, in response to a user request for Lidarr migration tools. The code is provided freely for any use - personal or commercial. Users are encouraged to modify, improve, and redistribute these scripts as needed.

### About Claude

Claude is an AI assistant developed by Anthropic, designed to be helpful, harmless, and honest. Learn more at [anthropic.com](https://www.anthropic.com).

## Contributing

Suggestions and improvements welcome! Common enhancements:

- Album-specific import/export
- Import list migration
- Custom profile mapping
- Progress bars for large imports

## Support

For issues related to:

- **Lidarr functionality**: Check [Lidarr documentation](https://wiki.servarr.com/lidarr)
- **MusicBrainz data**: Visit [MusicBrainz](https://musicbrainz.org)
- **Script bugs**: Review the script output and Lidarr logs
